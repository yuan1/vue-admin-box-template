import{d as x,_ as O,r as v,a as j,b as z,o as _,c as D,w as o,e as l,f as k,F as T,g as S,h as y,t as A,E as B,i as G,j as I,k as N,l as E,u,m as R,n as J,s as M,p as P,q as H,v as K,x as Q,y as W}from"./index-3e097ba8.js";import{a as X,u as Y,E as Z,b as ee,c as ae,d as le,T as te,g as oe,e as re,f as ne,h as se,v as ue}from"./el-radio-75d09949.js";const q=[{value:1,label:"运动"},{value:2,label:"健身"},{value:3,label:"跑酷"},{value:4,label:"街舞"}],L=[{value:1,label:"今天"},{value:2,label:"明天"},{value:3,label:"后天"}],ie=x({components:{Layer:O},props:{layer:{type:Object,default:()=>({show:!1,title:"",showButton:!0})}},setup(a,t){const i=v(null),s=v(null);let b=v({name:""});const g={name:[{required:!0,message:"请输入姓名",trigger:"blur"}],number:[{required:!0,message:"请输入数字",trigger:"blur"}],choose:[{required:!0,message:"请选择",trigger:"blur"}],radio:[{required:!0,message:"请选择",trigger:"blur"}]};c();function c(){a.layer.row&&(b.value=JSON.parse(JSON.stringify(a.layer.row)))}return{form:b,rules:g,layerDom:s,ruleForm:i,selectData:q,radioData:L}},methods:{submit(){this.ruleForm&&this.ruleForm.validate(a=>{if(a){let t=this.form;this.layer.row?this.updateForm(t):this.addForm(t)}else return!1})},addForm(a){X(a).then(t=>{this.$message({type:"success",message:"新增成功"}),this.$emit("getTableData",!0),this.layerDom&&this.layerDom.close()})},updateForm(a){Y(a).then(t=>{this.$message({type:"success",message:"编辑成功"}),this.$emit("getTableData",!1),this.layerDom&&this.layerDom.close()})}}});function de(a,t,i,s,b,g){const c=B,h=G,p=Z,V=ee,$=ae,F=le,d=I,r=z("Layer",!0);return _(),D(r,{layer:a.layer,onConfirm:a.submit,ref:"layerDom"},{default:o(()=>[l(d,{model:a.form,rules:a.rules,ref:"ruleForm","label-width":"120px",style:{"margin-right":"30px"}},{default:o(()=>[l(h,{label:"名称：",prop:"name"},{default:o(()=>[l(c,{modelValue:a.form.name,"onUpdate:modelValue":t[0]||(t[0]=e=>a.form.name=e),placeholder:"请输入名称"},null,8,["modelValue"])]),_:1}),l(h,{label:"数字：",prop:"number"},{default:o(()=>[l(c,{modelValue:a.form.number,"onUpdate:modelValue":t[1]||(t[1]=e=>a.form.number=e),oninput:"value=value.replace(/[^\\d]/g,'')",placeholder:"只能输入正整数"},null,8,["modelValue"])]),_:1}),l(h,{label:"选择器：",prop:"select"},{default:o(()=>[l(V,{modelValue:a.form.choose,"onUpdate:modelValue":t[2]||(t[2]=e=>a.form.choose=e),placeholder:"请选择",clearable:""},{default:o(()=>[(_(!0),k(T,null,S(a.selectData,e=>(_(),D(p,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(h,{label:"单选框：",prop:"radio"},{default:o(()=>[l(F,{modelValue:a.form.radio,"onUpdate:modelValue":t[3]||(t[3]=e=>a.form.radio=e)},{default:o(()=>[(_(!0),k(T,null,S(a.radioData,e=>(_(),D($,{key:e.value,label:e.value},{default:o(()=>[y(A(e.label),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["layer","onConfirm"])}const me=j(ie,[["render",de]]),ce={class:"layout-container"},pe={class:"layout-container-form flex space-between"},fe={class:"layout-container-form-handle"},_e={class:"layout-container-form-search"},be={class:"layout-container-table"},ye={__name:"index",setup(a){const t=N({input:""}),i=N({show:!1,title:"新增",showButton:!0}),s=N({index:1,size:20,total:0}),b=v(!0),g=v([]),c=v([]),h=d=>{c.value=d},p=d=>{b.value=!0,d&&(s.index=1);let r={page:s.index,pageSize:s.size,...t};oe(r).then(e=>{let w=e.data.list;Array.isArray(w)&&w.forEach(m=>{const f=q.find(n=>n.value===m.choose);f?m.chooseName=f.label:m.chooseName=m.choose;const C=L.find(n=>n.value===m.radio);C?m.radioName=C.label:m.radio}),g.value=e.data.list,s.total=Number(e.data.pager.total)}).catch(e=>{g.value=[],s.index=1,s.total=0}).finally(()=>{b.value=!1})},V=d=>{let r={ids:d.map(e=>e.id).join(",")};re(r).then(e=>{Q({type:"success",message:"删除成功"}),p(g.value.length===1)})},$=()=>{i.title="新增数据",i.show=!0,delete i.row},F=d=>{i.title="编辑数据",i.row=d,i.show=!0};return p(!0),(d,r)=>{const e=W,w=ne,m=B,f=se,C=ue;return _(),k("div",ce,[E("div",pe,[E("div",fe,[l(e,{type:"primary",icon:u(R),onClick:$},{default:o(()=>[y("新增")]),_:1},8,["icon"]),l(w,{title:"批量删除",onConfirm:r[0]||(r[0]=n=>V(u(c)))},{reference:o(()=>[l(e,{type:"danger",icon:u(J),disabled:u(c).length===0},{default:o(()=>[y("批量删除")]),_:1},8,["icon","disabled"])]),_:1})]),E("div",_e,[l(m,{modelValue:u(t).input,"onUpdate:modelValue":r[1]||(r[1]=n=>u(t).input=n),placeholder:"请输入关键词进行检索",onChange:r[2]||(r[2]=n=>p(!0))},null,8,["modelValue"]),l(e,{type:"primary",icon:u(M),class:"search-btn",onClick:r[3]||(r[3]=n=>p(!0))},{default:o(()=>[y("搜索")]),_:1},8,["icon"])])]),E("div",be,[P((_(),D(te,{ref:"table",page:u(s),"onUpdate:page":r[4]||(r[4]=n=>H(s)?s.value=n:null),showIndex:!0,showSelection:!0,data:u(g),onGetTableData:p,onSelectionChange:h},{default:o(()=>[l(f,{prop:"name",label:"名称",align:"center"}),l(f,{prop:"number",label:"数字",align:"center"}),l(f,{prop:"chooseName",label:"选择器",align:"center"}),l(f,{prop:"radioName",label:"单选框",align:"center"}),l(f,{label:"操作",align:"center",fixed:"right",width:"200"},{default:o(n=>[l(e,{onClick:U=>F(n.row)},{default:o(()=>[y("编辑")]),_:2},1032,["onClick"]),l(w,{title:"删除",onConfirm:U=>V([n.row])},{reference:o(()=>[l(e,{type:"danger"},{default:o(()=>[y("删除")]),_:1})]),_:2},1032,["onConfirm"])]),_:1})]),_:1},8,["page","data"])),[[C,u(b)]]),u(i).show?(_(),D(me,{key:0,layer:u(i),onGetTableData:p},null,8,["layer"])):K("",!0)])])}}};export{ye as default};
